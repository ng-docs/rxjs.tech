{
  "id": "api/index/function/animationFrames",
  "title": "animationFrames",
  "contents": "\n\n<article>\n  <div class=\"page-actions\">\n    <a href=\"https://github.com/reactivex/rxjs/edit/master/src/internal/observable/dom/animationFrames.ts?message=docs(index)%3A%20describe%20your%20change...#L6-L94\" aria-label=\"编辑建议\" title=\"编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n    <a href=\"https://github.com/reactivex/rxjs/tree/7.5.2/src/internal/observable/dom/animationFrames.ts#L6-L94\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n  </div>\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n          { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.io//api\", \"name\": \"API\" } },\n          { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.io/api/index\", \"name\": \"rxjs/index\" } },\n          { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.io/api/index/function/animationFrames\", \"name\": \"animationFrames\" } }\n          ]\n        }\n      </script>\n      <a href=\"/api\">API</a> / <a href=\"api/index\">rxjs/index</a>\n    </div>\n  <header class=\"api-header\">\n    <h1 id=\"animationframes\">animationFrames<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/animationFrames#animationframes\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label function\">function</label>\n    \n    \n    <label class=\"api-status-label stable\">稳定</label>\n    \n    \n  </header>\n  <aio-toc class=\"embedded\"></aio-toc>\n\n  <div class=\"api-body\">\n    \n  \n\n  <p class=\"short-description\"></p><p translation-result=\"on\">可观察者的动画帧</p><p translation-origin=\"off\">An observable of animation frames</p>\n\n<p></p>\n  \n\n  \n\n  \n\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\"> <a href=\"api/index/function/animationFrames\" class=\"code-anchor\">animationFrames</a>(timestampProvider?: <a href=\"api/index/interface/TimestampProvider\" class=\"code-anchor\">TimestampProvider</a>)</code-example>\n\n\n\n\n  <h4 class=\"no-anchor\" id=\"parameters\">参数</h4>\n  <table class=\"is-full-width list-table parameters-table function-overload-parameters\">\n  <tbody>\n  \n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\"><a id=\"\"></a>timestampProvider</td>\n      \n      <td class=\"param-description\">\n      <p>        可选。默认值为 <code>undefined</code>。</p>\n<p translation-result=\"on\">具有提供数字时间戳的 <code>now</code> 方法的对象</p><p translation-origin=\"off\">        An object with a <code>now</code> method that provides a numeric timestamp</p>\n\n\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n  \n\n\n\n\n\n\n\n  \n\n<section class=\"description\">\n  <h2 id=\"description\">说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/animationFrames#description\"><i class=\"material-icons\">link</i></a></h2>\n  <p translation-result=\"on\">发出自订阅以来经过的时间量和每个动画帧上的时间戳。默认为提供给 requestAnimationFrame 回调的毫秒数。不会自行结束。</p><p translation-origin=\"off\">Emits the amount of time elapsed since subscription and the timestamp on each animation frame.\nDefaults to milliseconds provided to the requestAnimationFrame's callback. Does not end on its own.</p>\n\n<p translation-result=\"on\">每个订阅都会启动一个单独的动画循环。由于动画帧总是由浏览器在重绘的紧前面调度的，因此同步调度多个动画帧与在单个动画帧期间循环遍历一系列事件应该没有多大区别，其开销也不会更大。但是，如果出于某种原因，开发人员希望确保动画相关处理器的执行都由引擎在同一任务期间执行，则可以使用 <code><a href=\"api/index/function/share\" class=\"code-anchor\">share</a></code> 操作符。</p><p translation-origin=\"off\">Every subscription will start a separate animation loop. Since animation frames are always scheduled\nby the browser to occur directly before a repaint, scheduling more than one animation frame synchronously\nshould not be much different or have more overhead than looping over an array of events during\na single animation frame. However, if for some reason the developer would like to ensure the\nexecution of animation-related handlers are all executed during the same task by the engine,\nthe <code><a href=\"api/index/function/share\" class=\"code-anchor\">share</a></code> operator can be used.</p>\n\n<p translation-result=\"on\">这在想用 RxJS 建立动画时很有用。</p><p translation-origin=\"off\">This is useful for setting up animations with RxJS.</p>\n\n<h2 id=\"examples\" translation-result=\"on\">例子<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/animationFrames#examples\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"examples\">Examples<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/animationFrames#examples\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">补间某个 div 以在屏幕上移动它</p><p translation-origin=\"off\">Tweening a div to move it on the screen</p>\n\n<code-example language=\"ts\">\nimport { <a href=\"api/index/function/animationFrames\" class=\"code-anchor\">animationFrames</a>, <a href=\"api/index/function/map\" class=\"code-anchor\">map</a>, <a href=\"api/index/function/takeWhile\" class=\"code-anchor\">takeWhile</a>, <a href=\"api/index/function/endWith\" class=\"code-anchor\">endWith</a> } <a href=\"api/index/function/from\" class=\"code-anchor\">from</a> 'rxjs';\n\nfunction tween(start: number, end: number, duration: number) {\n  const diff = end - start;\n  return <a href=\"api/index/function/animationFrames\" class=\"code-anchor\">animationFrames</a>().pipe(\n    // Figure out what percentage <a href=\"api/index/function/of\" class=\"code-anchor\">of</a> time has passed\n    <a href=\"api/index/function/map\" class=\"code-anchor\">map</a>(({ elapsed }) => elapsed / duration),\n    // Take the vector while less than 100%\n    <a href=\"api/index/function/takeWhile\" class=\"code-anchor\">takeWhile</a>(v => v &#x3C; 1),\n    // Finish with 100%\n    <a href=\"api/index/function/endWith\" class=\"code-anchor\">endWith</a>(1),\n    // Calculate the distance traveled between start and end\n    <a href=\"api/index/function/map\" class=\"code-anchor\">map</a>(v => v * diff + start)\n  );\n}\n\n// Setup a div for us to move around\nconst div = document.createElement('div');\ndocument.body.appendChild(div);\ndiv.style.position = 'absolute';\ndiv.style.width = '40px';\ndiv.style.height = '40px';\ndiv.style.backgroundColor = 'lime';\ndiv.style.transform = 'translate3d(10px, 0, 0)';\n\ntween(10, 200, 4000).subscribe(x => {\n  div.style.transform = `translate3d(${ x }px, 0, 0)`;\n});\n</code-example>\n<p translation-result=\"on\">提供一个自定义时间戳提供者</p><p translation-origin=\"off\">Providing a custom timestamp provider</p>\n\n<code-example language=\"ts\">\nimport { <a href=\"api/index/function/animationFrames\" class=\"code-anchor\">animationFrames</a>, <a href=\"api/index/interface/TimestampProvider\" class=\"code-anchor\">TimestampProvider</a> } <a href=\"api/index/function/from\" class=\"code-anchor\">from</a> 'rxjs';\n\n// A custom <a href=\"api/index/function/timestamp\" class=\"code-anchor\">timestamp</a> provider\nlet now = 0;\nconst customTSProvider: <a href=\"api/index/interface/TimestampProvider\" class=\"code-anchor\">TimestampProvider</a> = {\n  now() { return now++; }\n};\n\nconst source$ = <a href=\"api/index/function/animationFrames\" class=\"code-anchor\">animationFrames</a>(customTSProvider);\n\n// Log increasing numbers 0...1...2... on <a href=\"api/index/function/every\" class=\"code-anchor\">every</a> animation frame.\nsource$.subscribe(({ elapsed }) => console.log(elapsed));\n</code-example>\n\n</section>\n\n\n\n\n  \n\n  \n\n\n  </div>\n</article>\n\n<!-- links to this doc:\n - api/index\n-->\n<!-- links from this doc:\n - /api\n - api/index\n - api/index/function/animationFrames#animationframes\n - api/index/function/animationFrames#description\n - api/index/function/animationFrames#examples\n - api/index/function/endWith\n - api/index/function/every\n - api/index/function/from\n - api/index/function/map\n - api/index/function/of\n - api/index/function/share\n - api/index/function/takeWhile\n - api/index/function/timestamp\n - api/index/interface/TimestampProvider\n - https://github.com/reactivex/rxjs/edit/master/src/internal/observable/dom/animationFrames.ts?message=docs(index)%3A%20describe%20your%20change...#L6-L94\n - https://github.com/reactivex/rxjs/tree/7.5.2/src/internal/observable/dom/animationFrames.ts#L6-L94\n-->"
}