{
  "id": "api/index/function/scan",
  "title": "scan",
  "contents": "\n\n<article>\n  <div class=\"page-actions\">\n    <a href=\"https://github.com/reactivex/rxjs/edit/master/src/internal/operators/scan.ts?message=docs(index)%3A%20describe%20your%20change...#L8-L134\" aria-label=\"编辑建议\" title=\"编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n    <a href=\"https://github.com/reactivex/rxjs/tree/7.5.2/src/internal/operators/scan.ts#L8-L134\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n  </div>\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n          { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.io//api\", \"name\": \"API\" } },\n          { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.io/api/index\", \"name\": \"rxjs/index\" } },\n          { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.io/api/index/function/scan\", \"name\": \"scan\" } }\n          ]\n        }\n      </script>\n      <a href=\"/api\">API</a> / <a href=\"api/index\">rxjs/index</a>\n    </div>\n  <header class=\"api-header\">\n    <h1 id=\"scan\">scan<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/scan#scan\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label function\">function</label>\n    \n    \n    <label class=\"api-status-label stable\">稳定</label>\n    \n    <label class=\"api-status-label operator\">操作符</label>\n  </header>\n  <aio-toc class=\"embedded\"></aio-toc>\n\n  <div class=\"api-body\">\n    \n  \n\n  <p class=\"short-description\"></p><p translation-result=\"on\">用于封装和管理状态。在使用 <code>seed</code> 值（第二个参数）或来自源的第一个值建立了初始状态之后，对来自源的每个值调用累加器（或“reducer 函数”）。</p><p translation-origin=\"off\">Useful for encapsulating and managing state. Applies an accumulator (or \"reducer function\")\nto each value from the source after an initial state is established -- either via\na <code>seed</code> value (second argument), or from the first value from the source.</p>\n\n<p translation-result=\"on\"><span class=\"informal\">类似于 <a href=\"api/index/function/reduce\"><code>reduce</code></a>，但在每次更新后会发送当前的累积状态</span></p><p translation-origin=\"off\"><span class=\"informal\">It's like <a href=\"api/index/function/reduce\"><code>reduce</code></a>, but emits the current\naccumulation state after each update</span></p>\n\n<p><img src=\"/assets/images/marble-diagrams/scan.png\" width=\"100%\" alt=\"scan marble diagram\"></p>\n<p translation-result=\"on\">该操作符会维护一个内部状态，并在处理每个值后发送它，如下所示：</p><p translation-origin=\"off\">This operator maintains an internal state and emits it after processing each value as follows:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">第一个值抵达</p><p translation-origin=\"off\">First value arrives</p>\n\n</li>\n</ol>\n<ul>\n<li>\n<p translation-result=\"on\">如果提供了 <code>seed</code> 值（作为 <code><a href=\"api/index/function/scan\" class=\"code-anchor\">scan</a></code> 的第二个参数），则让 <code>state = seed</code> 和 <code>value = firstValue</code>。</p><p translation-origin=\"off\">If a <code>seed</code> value was supplied (as the second argument to <code><a href=\"api/index/function/scan\" class=\"code-anchor\">scan</a></code>), let <code>state = seed</code> and <code>value = firstValue</code>.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">如果没有提供 <code>seed</code> 值（没有第二个参数），则让 <code>state = firstValue</code> 并转到 3。</p><p translation-origin=\"off\">If NO <code>seed</code> value was supplied (no second argument), let <code>state = firstValue</code> and go to 3.</p>\n\n</li>\n</ul>\n<ol start=\"2\">\n<li>\n<p translation-result=\"on\">让 <code>state = accumulator(state, value)</code>。</p><p translation-origin=\"off\">Let <code>state = accumulator(state, value)</code>.</p>\n\n</li>\n</ol>\n<ul>\n<li>\n<p translation-result=\"on\">如果 <code>accumulator</code> 抛出错误，则向使用者通知一个错误。该过程结束。</p><p translation-origin=\"off\">If an error is thrown by <code>accumulator</code>, notify the consumer of an error. The process ends.</p>\n\n</li>\n</ul>\n<ol start=\"3\">\n<li>\n<p translation-result=\"on\">发送 <code>state</code>。</p><p translation-origin=\"off\">Emit <code>state</code>.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">下一个值抵达，让 <code>value = nextValue</code>，转到 2。</p><p translation-origin=\"off\">Next value arrives, let <code>value = nextValue</code>, go to 2.</p>\n\n</li>\n</ol>\n<h2 id=\"examples\" translation-result=\"on\">例子<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/scan#examples\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"examples\">Examples<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/scan#examples\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">先前数字的平均值。此示例显示了如果不提供 <code>seed</code> 就会使用来自源的第一个值来初始化流。</p><p translation-origin=\"off\">An average of previous numbers. This example shows how\nnot providing a <code>seed</code> can prime the stream with the\nfirst value from the source.</p>\n\n<code-example language=\"ts\">\nimport { <a href=\"api/index/function/of\" class=\"code-anchor\">of</a>, <a href=\"api/index/function/scan\" class=\"code-anchor\">scan</a>, <a href=\"api/index/function/map\" class=\"code-anchor\">map</a> } <a href=\"api/index/function/from\" class=\"code-anchor\">from</a> 'rxjs';\n\nconst numbers$ = <a href=\"api/index/function/of\" class=\"code-anchor\">of</a>(1, 2, 3);\n\nnumbers$\n  .pipe(\n    // Get the sum <a href=\"api/index/function/of\" class=\"code-anchor\">of</a> the numbers coming in.\n    <a href=\"api/index/function/scan\" class=\"code-anchor\">scan</a>((total, n) => total + n),\n    // Get the average by dividing the sum by the total number\n    // received so var (which is 1 more than the zero-based index).\n    <a href=\"api/index/function/map\" class=\"code-anchor\">map</a>((sum, index) => sum / (index + 1))\n  )\n  .subscribe(console.log);\n</code-example>\n<p translation-result=\"on\">斐波那契数列。这个例子展示了如何使用种子来启动积累过程。另外，你懂的，斐波那契对于计算机和同事们非常重要，以至于它常常在求职面试中写在白板上。现在你可以向他们秀一下 Rx 版本了！（别当真，哈哈）</p><p translation-origin=\"off\">The Fibonacci sequence. This example shows how you can use\na seed to prime accumulation process. Also... you know... Fibonacci.\nSo important to like, computers and stuff that its whiteboarded\nin job interviews. Now you can show them the Rx version! (Please don't, haha)</p>\n\n<code-example language=\"ts\">\nimport { <a href=\"api/index/function/interval\" class=\"code-anchor\">interval</a>, <a href=\"api/index/function/scan\" class=\"code-anchor\">scan</a>, <a href=\"api/index/function/map\" class=\"code-anchor\">map</a>, <a href=\"api/index/function/startWith\" class=\"code-anchor\">startWith</a> } <a href=\"api/index/function/from\" class=\"code-anchor\">from</a> 'rxjs';\n\nconst firstTwoFibs = [0, 1];\n// An endless stream <a href=\"api/index/function/of\" class=\"code-anchor\">of</a> Fibonacci numbers.\nconst fibonacci$ = <a href=\"api/index/function/interval\" class=\"code-anchor\">interval</a>(1000).pipe(\n  // Scan to get the fibonacci numbers (after 0, 1)\n  <a href=\"api/index/function/scan\" class=\"code-anchor\">scan</a>(([a, b]) => [b, a + b], firstTwoFibs),\n  // Get the second number in the tuple, it's the one you calculated\n  <a href=\"api/index/function/map\" class=\"code-anchor\">map</a>(([, n]) => n),\n  // Start with our <a href=\"api/index/function/first\" class=\"code-anchor\">first</a> two digits :)\n  <a href=\"api/index/function/startWith\" class=\"code-anchor\">startWith</a>(...firstTwoFibs)\n);\n\nfibonacci$.subscribe(console.log);\n</code-example>\n<p></p>\n  \n\n  \n\n  \n\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\"> <a href=\"api/index/function/scan\" class=\"code-anchor\">scan</a>&#x3C;V, A, S>(accumulator: (acc: V | A | S, value: V, index: number) => A, seed?: S): <a href=\"api/index/interface/OperatorFunction\" class=\"code-anchor\">OperatorFunction</a>&#x3C;V, V | A></code-example>\n\n\n\n\n  <h4 class=\"no-anchor\" id=\"parameters\">参数</h4>\n  <table class=\"is-full-width list-table parameters-table function-overload-parameters\">\n  <tbody>\n  \n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\"><a id=\"\"></a>accumulator</td>\n      \n      <td class=\"param-description\">\n      <p translation-result=\"on\">一个“归结器函数”。这将在获得初始状态后针对每个值进行调用。</p><p translation-origin=\"off\">        A \"reducer function\". This will be called for each value after an initial state is\nacquired.</p>\n\n\n      </td>\n    </tr>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\"><a id=\"\"></a>seed</td>\n      \n      <td class=\"param-description\">\n      <p>        可选。默认值为 <code>undefined</code>。</p>\n<p translation-result=\"on\">初始状态。如果未提供，则会把源中的第一个值用作初始状态，并在不经过累加器的情况下发送。则后续的所有值都会由累加器函数处理。如果提供了它，则所有值都会传给累加器函数。</p><p translation-origin=\"off\">        The initial state. If this is not provided, the first value from the source will\nbe used as the initial state, and emitted without going through the accumulator. All subsequent values\nwill be processed by the accumulator function. If this is provided, all values will go through\nthe accumulator function.</p>\n\n\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n  \n  <h4 class=\"no-anchor\" id=\"返回值\">返回值</h4>\n  <p translation-result=\"on\">返回累加结果的 Observable 的函数。</p><p translation-origin=\"off\"><code><a href=\"api/index/interface/OperatorFunction\" class=\"code-anchor\">OperatorFunction</a>&#x3C;V, V | A></code>: A function that returns an Observable of the accumulated values.</p>\n\n\n  \n\n\n\n\n\n\n\n  \n\n\n\n<section class=\"overloads\">\n  <h2 id=\"overloads\">重载形式<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/scan#overloads\"><i class=\"material-icons\">link</i></a></h2>\n  <table>\n  \n  <tbody><tr>\n    <td>\n      <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\"> <a href=\"api/index/function/scan\" class=\"code-anchor\">scan</a>(accumulator: (acc: V | A, value: V, index: number) => A): <a href=\"api/index/interface/OperatorFunction\" class=\"code-anchor\">OperatorFunction</a>&#x3C;V, V | A></code-example>\n\n\n\n\n  <h4 class=\"no-anchor\" id=\"parameters\">参数</h4>\n  <table class=\"is-full-width list-table parameters-table function-overload-parameters\">\n  <tbody>\n  \n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\"><a id=\"\"></a>accumulator</td>\n      \n      <td class=\"param-description\">\n              <p>类型：<code>(acc: V | A, value: V, index: number) => A</code>。</p>\n        \n      </td>\n    </tr>\n  </tbody>\n</table>\n\n  \n  <h4 class=\"no-anchor\" id=\"返回值-1\">返回值</h4>\n  <p><code><a href=\"api/index/interface/OperatorFunction\" class=\"code-anchor\">OperatorFunction</a>&#x3C;V, V | A></code></p>\n\n  \n\n\n\n\n\n    </td>\n  </tr>\n  \n  <tr>\n    <td>\n      <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\"> <a href=\"api/index/function/scan\" class=\"code-anchor\">scan</a>(accumulator: (acc: A, value: V, index: number) => A, seed: A): <a href=\"api/index/interface/OperatorFunction\" class=\"code-anchor\">OperatorFunction</a>&#x3C;V, A></code-example>\n\n\n\n\n  <h4 class=\"no-anchor\" id=\"parameters\">参数</h4>\n  <table class=\"is-full-width list-table parameters-table function-overload-parameters\">\n  <tbody>\n  \n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\"><a id=\"\"></a>accumulator</td>\n      \n      <td class=\"param-description\">\n              <p>类型：<code>(acc: A, value: V, index: number) => A</code>。</p>\n        \n      </td>\n    </tr>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\"><a id=\"\"></a>seed</td>\n      \n      <td class=\"param-description\">\n              <p>类型：<code>A</code>。</p>\n        \n      </td>\n    </tr>\n  </tbody>\n</table>\n\n  \n  <h4 class=\"no-anchor\" id=\"返回值-2\">返回值</h4>\n  <p><code><a href=\"api/index/interface/OperatorFunction\" class=\"code-anchor\">OperatorFunction</a>&#x3C;V, A></code></p>\n\n  \n\n\n\n\n\n    </td>\n  </tr>\n  \n  <tr>\n    <td>\n      <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\"> <a href=\"api/index/function/scan\" class=\"code-anchor\">scan</a>(accumulator: (acc: A | S, value: V, index: number) => A, seed: S): <a href=\"api/index/interface/OperatorFunction\" class=\"code-anchor\">OperatorFunction</a>&#x3C;V, A></code-example>\n\n\n\n\n  <h4 class=\"no-anchor\" id=\"parameters\">参数</h4>\n  <table class=\"is-full-width list-table parameters-table function-overload-parameters\">\n  <tbody>\n  \n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\"><a id=\"\"></a>accumulator</td>\n      \n      <td class=\"param-description\">\n              <p>类型：<code>(acc: A | S, value: V, index: number) => A</code>。</p>\n        \n      </td>\n    </tr>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\"><a id=\"\"></a>seed</td>\n      \n      <td class=\"param-description\">\n              <p>类型：<code>S</code>。</p>\n        \n      </td>\n    </tr>\n  </tbody>\n</table>\n\n  \n  <h4 class=\"no-anchor\" id=\"返回值-3\">返回值</h4>\n  <p><code><a href=\"api/index/interface/OperatorFunction\" class=\"code-anchor\">OperatorFunction</a>&#x3C;V, A></code></p>\n\n  \n\n\n\n\n\n    </td>\n  </tr>\n  \n  </tbody></table>\n</section>\n\n\n  \n\n  \n<section class=\"see-also\">\n  <h2 id=\"see-also\">参见<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/scan#see-also\"><i class=\"material-icons\">link</i></a></h2>\n  <ul>\n  \n    <li><a href=\"api/index/function/expand\"><code>expand</code></a>\n</li>\n    <li><a href=\"api/index/function/mergeScan\"><code>mergeScan</code></a>\n</li>\n    <li><a href=\"api/index/function/reduce\"><code>reduce</code></a>\n</li>\n    <li><a href=\"api/index/function/switchScan\"><code>switchScan</code></a>\n</li>\n  </ul>\n</section>\n\n\n\n  </div>\n</article>\n\n<!-- links to this doc:\n - api/index\n - api/index/function/debounce\n - api/index/function/mergeScan\n - api/index/function/reduce\n - api/index/function/switchScan\n - api/operators/debounce\n - api/operators/scan\n - guide/overview\n-->\n<!-- links from this doc:\n - /api\n - api/index\n - api/index/function/expand\n - api/index/function/first\n - api/index/function/from\n - api/index/function/interval\n - api/index/function/map\n - api/index/function/mergeScan\n - api/index/function/of\n - api/index/function/reduce\n - api/index/function/scan#examples\n - api/index/function/scan#overloads\n - api/index/function/scan#scan\n - api/index/function/scan#see-also\n - api/index/function/startWith\n - api/index/function/switchScan\n - api/index/interface/OperatorFunction\n - https://github.com/reactivex/rxjs/edit/master/src/internal/operators/scan.ts?message=docs(index)%3A%20describe%20your%20change...#L8-L134\n - https://github.com/reactivex/rxjs/tree/7.5.2/src/internal/operators/scan.ts#L8-L134\n-->"
}