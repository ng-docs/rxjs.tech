{
  "id": "api/index/function/throwError",
  "title": "throwError",
  "contents": "\n\n<article>\n  <div class=\"page-actions\">\n    <a href=\"https://github.com/reactivex/rxjs/edit/master/src/internal/observable/throwError.ts?message=docs(index)%3A%20describe%20your%20change...#L157-L162\" aria-label=\"编辑建议\" title=\"编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n    <a href=\"https://github.com/reactivex/rxjs/tree/7.5.2/src/internal/observable/throwError.ts#L157-L162\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n  </div>\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n          { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.io//api\", \"name\": \"API\" } },\n          { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.io/api/index\", \"name\": \"rxjs/index\" } },\n          { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.io/api/index/function/throwError\", \"name\": \"throwError\" } }\n          ]\n        }\n      </script>\n      <a href=\"/api\">API</a> / <a href=\"api/index\">rxjs/index</a>\n    </div>\n  <header class=\"api-header\">\n    <h1 id=\"throwerror\">throwError<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/throwError#throwerror\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label function\">function</label>\n    \n    \n    <label class=\"api-status-label stable\">稳定</label>\n    \n    \n  </header>\n  <aio-toc class=\"embedded\"></aio-toc>\n\n  <div class=\"api-body\">\n    \n  \n\n  <p class=\"short-description\"></p>\n  \n\n  \n\n  \n\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\"> <a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a>(errorOrErrorFactory: any, scheduler?: <a href=\"api/index/interface/SchedulerLike\" class=\"code-anchor\">SchedulerLike</a>): <a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>&#x3C;<a href=\"api/index/function/never\" class=\"code-anchor\">never</a>></code-example>\n\n\n\n\n  <h4 class=\"no-anchor\" id=\"parameters\">参数</h4>\n  <table class=\"is-full-width list-table parameters-table function-overload-parameters\">\n  <tbody>\n  \n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\"><a id=\"\"></a>errorOrErrorFactory</td>\n      \n      <td class=\"param-description\">\n              <p>类型：<code>any</code>。</p>\n        \n      </td>\n    </tr>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\"><a id=\"\"></a>scheduler</td>\n      \n      <td class=\"param-description\">\n              <p>可选。默认值为 <code>undefined</code>。</p>\n        <p>类型：<code><a href=\"api/index/interface/SchedulerLike\" class=\"code-anchor\">SchedulerLike</a></code>。</p>\n        \n      </td>\n    </tr>\n  </tbody>\n</table>\n\n  \n  <h4 class=\"no-anchor\" id=\"返回值\">返回值</h4>\n  <p><code><a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>&#x3C;<a href=\"api/index/function/never\" class=\"code-anchor\">never</a>></code></p>\n\n  \n\n\n\n\n\n\n\n  \n\n\n\n<section class=\"overloads\">\n  <h2 id=\"overloads\">重载形式<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/throwError#overloads\"><i class=\"material-icons\">link</i></a></h2>\n  <table>\n  \n  <tbody><tr>\n    <td>\n      <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\"> <a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a>(errorFactory: () => any): <a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>&#x3C;<a href=\"api/index/function/never\" class=\"code-anchor\">never</a>></code-example>\n\n\n  <div class=\"short-description\">\n    <p translation-result=\"on\">创建一个 observable，它将创建一个错误实例，并在订阅后立即将其作为错误推送给消费者。</p><p translation-origin=\"off\">Creates an observable that will create an error instance and push it to the consumer as an error\nimmediately upon subscription.</p>\n\n<p translation-result=\"on\"><span class=\"informal\">只是报错，什么都不做</span></p><p translation-origin=\"off\"><span class=\"informal\">Just errors and does nothing else</span></p>\n\n<p><img src=\"/assets/images/marble-diagrams/throw.png\" width=\"100%\" alt=\"throw marble diagram\"></p>\n<p translation-result=\"on\">这个创建函数对于创建一个 observable 很有用，它会在每次订阅时创建一个错误并报错。通常，在大多数操作符中，当你可能要返回错误的 Observable 时，这是没必要的。在大多数情况下，例如在 <a href=\"api/index/function/concatMap\"><code>concatMap</code></a>、<a href=\"api/index/function/mergeMap\"><code>mergeMap</code></a>、<a href=\"api/index/function/defer\"><code>defer</code></a> 和许多其它的内部返回中，你可以简单地抛出错误，RxJS 会捕获它并把这个错误通知消费者。</p><p translation-origin=\"off\">This creation function is useful for creating an observable that will create an error and error every\ntime it is subscribed to. Generally, inside of most operators when you might want to return an errored\nobservable, this is unnecessary. In most cases, such as in the inner return of <a href=\"api/index/function/concatMap\"><code>concatMap</code></a>,\n<a href=\"api/index/function/mergeMap\"><code>mergeMap</code></a>, <a href=\"api/index/function/defer\"><code>defer</code></a>, and many others, you can simply throw the error, and RxJS will pick\nthat up and notify the consumer of the error.</p>\n\n<h2 id=\"example\" translation-result=\"on\">例子<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/throwError#example\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"example\">Example<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/throwError#example\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">创建一个简单的 Observable，它将创建一个带有时间戳的新错误，并在你每次订阅它时记录它和错误信息</p><p translation-origin=\"off\">Create a simple observable that will create a new error with a timestamp and log it\nand the message every time you subscribe to it</p>\n\n<code-example language=\"ts\">\nimport { <a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a> } <a href=\"api/index/function/from\" class=\"code-anchor\">from</a> 'rxjs';\n\nlet errorCount = 0;\n\nconst errorWithTimestamp$ = <a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a>(() => {\n  const error: any = new Error(`This is error number ${ ++errorCount }`);\n  error.timestamp = Date.now();\n  return error;\n});\n\nerrorWithTimestamp$.subscribe({\n  error: err => console.log(err.timestamp, err.message)\n});\n\nerrorWithTimestamp$.subscribe({\n  error: err => console.log(err.timestamp, err.message)\n});\n\n// Logs the <a href=\"api/index/function/timestamp\" class=\"code-anchor\">timestamp</a> and a new error message for each subscription\n</code-example>\n<h3 id=\"unnecessary-usage\" translation-result=\"on\">非必要的使用<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/throwError#unnecessary-usage\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"unnecessary-usage\">Unnecessary usage<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/throwError#unnecessary-usage\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">在操作符或带有回调的创建函数中使用 <code><a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a></code> 通常不是必需的</p><p translation-origin=\"off\">Using <code><a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a></code> inside of an operator or creation function\nwith a callback, is usually not necessary</p>\n\n<code-example language=\"ts\">\nimport { <a href=\"api/index/function/of\" class=\"code-anchor\">of</a>, <a href=\"api/index/function/concatMap\" class=\"code-anchor\">concatMap</a>, <a href=\"api/index/function/timer\" class=\"code-anchor\">timer</a>, <a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a> } <a href=\"api/index/function/from\" class=\"code-anchor\">from</a> 'rxjs';\n\nconst delays$ = <a href=\"api/index/function/of\" class=\"code-anchor\">of</a>(1000, 2000, Infinity, 3000);\n\ndelays$.pipe(\n  <a href=\"api/index/function/concatMap\" class=\"code-anchor\">concatMap</a>(ms => {\n    if (ms &#x3C; 10000) {\n      return <a href=\"api/index/function/timer\" class=\"code-anchor\">timer</a>(ms);\n    } else {\n      // This is probably overkill.\n      return <a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a>(() => new Error(`Invalid time ${ ms }`));\n    }\n  })\n)\n.subscribe({\n  next: console.log,\n  error: console.error\n});\n</code-example>\n<p translation-result=\"on\">你可以改为抛出错误</p><p translation-origin=\"off\">You can just throw the error instead</p>\n\n<code-example language=\"ts\">\nimport { <a href=\"api/index/function/of\" class=\"code-anchor\">of</a>, <a href=\"api/index/function/concatMap\" class=\"code-anchor\">concatMap</a>, <a href=\"api/index/function/timer\" class=\"code-anchor\">timer</a> } <a href=\"api/index/function/from\" class=\"code-anchor\">from</a> 'rxjs';\n\nconst delays$ = <a href=\"api/index/function/of\" class=\"code-anchor\">of</a>(1000, 2000, Infinity, 3000);\n\ndelays$.pipe(\n  <a href=\"api/index/function/concatMap\" class=\"code-anchor\">concatMap</a>(ms => {\n    if (ms &#x3C; 10000) {\n      return <a href=\"api/index/function/timer\" class=\"code-anchor\">timer</a>(ms);\n    } else {\n      // Cleaner and easier to read for most folks.\n      throw new Error(`Invalid time ${ ms }`);\n    }\n  })\n)\n.subscribe({\n  next: console.log,\n  error: console.error\n});\n</code-example>\n\n</div>\n\n\n  <h4 class=\"no-anchor\" id=\"parameters\">参数</h4>\n  <table class=\"is-full-width list-table parameters-table function-overload-parameters\">\n  <tbody>\n  \n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\"><a id=\"\"></a>errorFactory</td>\n      \n      <td class=\"param-description\">\n      <p translation-result=\"on\">一个工厂函数，它将创建被推送的错误实例。</p><p translation-origin=\"off\">        A factory function that will create the error instance that is pushed.</p>\n\n\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n  \n  <h4 class=\"no-anchor\" id=\"返回值-1\">返回值</h4>\n  <p><code><a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>&#x3C;<a href=\"api/index/function/never\" class=\"code-anchor\">never</a>></code></p>\n\n  \n\n\n\n\n\n    </td>\n  </tr>\n  \n  <tr>\n    <td>\n      <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading deprecated-api-item\"> <a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a>(error: any): <a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>&#x3C;<a href=\"api/index/function/never\" class=\"code-anchor\">never</a>></code-example>\n\n\n  <div class=\"short-description\">\n    <p translation-result=\"on\">返回一个 observable，它会在订阅后立即发送指定的错误。</p><p translation-origin=\"off\">Returns an observable that will error with the specified error immediately upon subscription.</p>\n\n\n</div>\n\n  <div class=\"deprecated\">\n  <h4 id=\"deprecation-notes\">弃用说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/throwError#deprecation-notes\"><i class=\"material-icons\">link</i></a></h4>\n  <p translation-result=\"on\">在 v8 中将删除对传入错误值的支持。相反，要传入工厂函数 <code><a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a>(() => new Error('test'))</code>。这是因为它会在要创建它的那一刻创建错误并捕获一个更合适的跟踪堆栈。如果由于某种原因你需要提前创建错误，你仍然可以这样做： <code>const err = new Error('test'); <a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a>(() => err);</code>。</p><p translation-origin=\"off\">Support for passing an error value will be removed in v8. Instead, pass a factory function to <code><a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a>(() => new Error('test'))</code>. This is\nbecause it will create the error at the moment it should be created and capture a more appropriate stack trace. If\nfor some reason you need to create the error ahead of time, you can still do that: <code>const err = new Error('test'); <a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a>(() => err);</code>.</p>\n\n\n  </div>\n\n  <h4 class=\"no-anchor\" id=\"parameters\">参数</h4>\n  <table class=\"is-full-width list-table parameters-table function-overload-parameters\">\n  <tbody>\n  \n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\"><a id=\"\"></a>error</td>\n      \n      <td class=\"param-description\">\n      <p translation-result=\"on\">要发送的错误实例</p><p translation-origin=\"off\">        The error instance to emit</p>\n\n\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n  \n  <h4 class=\"no-anchor\" id=\"返回值-2\">返回值</h4>\n  <p><code><a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>&#x3C;<a href=\"api/index/function/never\" class=\"code-anchor\">never</a>></code></p>\n\n  \n\n\n\n\n\n    </td>\n  </tr>\n  \n  <tr>\n    <td>\n      <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading deprecated-api-item\"> <a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a>(errorOrErrorFactory: any, scheduler: <a href=\"api/index/interface/SchedulerLike\" class=\"code-anchor\">SchedulerLike</a>): <a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>&#x3C;<a href=\"api/index/function/never\" class=\"code-anchor\">never</a>></code-example>\n\n\n  <div class=\"short-description\">\n    <p translation-result=\"on\">通过订阅时在延迟 <code>0</code> 处调度它，可以使用给定的调度器来通知消费者错误。</p><p translation-origin=\"off\">Notifies the consumer of an error using a given scheduler by scheduling it at delay <code>0</code> upon subscription.</p>\n\n\n</div>\n\n  <div class=\"deprecated\">\n  <h4 id=\"deprecation-notes\">弃用说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/throwError#deprecation-notes\"><i class=\"material-icons\">link</i></a></h4>\n  <p translation-result=\"on\"><code>scheduler</code> 参数将在 v8 中删除。请将 <code><a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a></code> 与 <a href=\"api/index/function/observeOn\"><code>observeOn</code></a> 结合使用： <code><a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a>(() => new Error('test')).pipe(<a href=\"api/index/function/observeOn\" class=\"code-anchor\">observeOn</a>(scheduler));</code>。详细信息： <a href=\"https://rxjs.dev/deprecations/scheduler-argument\">https://rxjs.dev/deprecations/scheduler-argument</a></p><p translation-origin=\"off\">The <code>scheduler</code> parameter will be removed in v8.\nUse <code><a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a></code> in combination with <a href=\"api/index/function/observeOn\"><code>observeOn</code></a>: <code><a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a>(() => new Error('test')).pipe(<a href=\"api/index/function/observeOn\" class=\"code-anchor\">observeOn</a>(scheduler));</code>.\nDetails: <a href=\"https://rxjs.dev/deprecations/scheduler-argument\">https://rxjs.dev/deprecations/scheduler-argument</a></p>\n\n\n  </div>\n\n  <h4 class=\"no-anchor\" id=\"parameters\">参数</h4>\n  <table class=\"is-full-width list-table parameters-table function-overload-parameters\">\n  <tbody>\n  \n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\"><a id=\"\"></a>errorOrErrorFactory</td>\n      \n      <td class=\"param-description\">\n      <p translation-result=\"on\">错误实例或错误工厂</p><p translation-origin=\"off\">        An error instance or error factory</p>\n\n\n      </td>\n    </tr>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\"><a id=\"\"></a>scheduler</td>\n      \n      <td class=\"param-description\">\n      <p translation-result=\"on\">用于安排错误通知的调度器</p><p translation-origin=\"off\">        A scheduler to use to schedule the error notification</p>\n\n\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n  \n  <h4 class=\"no-anchor\" id=\"返回值-3\">返回值</h4>\n  <p><code><a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>&#x3C;<a href=\"api/index/function/never\" class=\"code-anchor\">never</a>></code></p>\n\n  \n\n\n\n\n\n    </td>\n  </tr>\n  \n  </tbody></table>\n</section>\n\n\n  \n\n  \n\n\n  </div>\n</article>\n\n<!-- links to this doc:\n - 6-to-7-change-summary\n - api/index\n - api/index/const/NEVER\n - api/index/function/empty\n - api/index/function/timeout\n - api/operators/timeout\n - deprecations/breaking-changes\n - deprecations/subscribe-arguments\n - guide/testing/marble-testing\n-->\n<!-- links from this doc:\n - /api\n - api/index\n - api/index/class/Observable\n - api/index/function/concatMap\n - api/index/function/defer\n - api/index/function/from\n - api/index/function/mergeMap\n - api/index/function/never\n - api/index/function/observeOn\n - api/index/function/of\n - api/index/function/throwError#deprecation-notes\n - api/index/function/throwError#example\n - api/index/function/throwError#overloads\n - api/index/function/throwError#throwerror\n - api/index/function/throwError#unnecessary-usage\n - api/index/function/timer\n - api/index/function/timestamp\n - api/index/interface/SchedulerLike\n - https://github.com/reactivex/rxjs/edit/master/src/internal/observable/throwError.ts?message=docs(index)%3A%20describe%20your%20change...#L157-L162\n - https://github.com/reactivex/rxjs/tree/7.5.2/src/internal/observable/throwError.ts#L157-L162\n - https://rxjs.dev/deprecations/scheduler-argument\n-->"
}